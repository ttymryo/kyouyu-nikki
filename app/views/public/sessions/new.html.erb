<div class="container-fluid">
  <div class="col-11 col-xl-8 col-xxl-6 card mx-auto mt-4 shadow-sm form-color">
    <div class="card-body col-12 row justify-content-center mx-auto">
      <div class="col-12">
        <h3 class="text-center pb-3">ログイン</h3>
      </div>
      <%= form_with model: @user, url: user_session_path, class: 'col-12 justify-content-center' do |f| %>
        <div class="form-group row mb-4">
          <div class="col-12 col-lg-2">
            <%= f.label :name_id, 'ユーザーID' %>
          </div>
          <div class="col-12 col-lg-10">
            <%= f.text_field :name_id, autofocus: true, autocomplete: "name_id", pattern: "^[a-zA-Z0-9_]+$",minlength:"3",required: true, class: 'form-control' %>
          </div>
        </div>

        <div class="form-group mb-4 row">
          <div class="col-12 col-lg-2">
            <%= f.label :email, 'メールアドレス' %>
          </div>
          <div class="col-12 col-lg-10">
            <%= f.email_field :email, autofocus: true, autocomplete: "email",required: true, class: 'form-control' %>
          </div>
        </div>

        <div class="form-group row">
          <div class="col-12 col-lg-2">
            <%= f.label :password %>
          </div>
          <div class="col-12 col-lg-10">
            <%= f.password_field :password, autocomplete: "current-password",required: true, class: 'form-control' %>
          </div>
        </div>

        <% if devise_mapping.rememberable? %>
          <div class="field col-12">
            <%= f.check_box :remember_me %>
            <%= f.label :remember_me %>
          </div>
        <% end %>

        <div class="col-12 row mx-auto my-4 p-0">
          <div class="col-12 p-2">
            <%= f.submit "ログイン", class: 'btn btn-outline-primary btn-block mx-auto rounded-pill' %>
          </div>
        </div>
        <div class="row col-12 mx-auto p-0">
          <div class="col-12">
            <div class="text-line mx-auto">
              <span><i class="fas fa-caret-right"></i> 会員登録がお済みでない方 <i class="fas fa-caret-left"></i></span>
            </div>
          </div>
          <div class="col-12 mx-auto p-2">
            <%= link_to "新規登録はこちら", new_user_registration_path, data: {"turbolinks" => false}, class: "btn btn-outline-primary btn-block rounded-pill" %>
          </div>
          <div class="col-12 mx-auto p-2">
            <%= link_to "ゲストログイン", users_guest_sign_in_path, method: :post, class: "btn btn-outline-primary btn-block rounded-pill" %>
          </div>
        </div>

      <% end %>
    </div>
  </div>
</div>

<script>
  function count_length(Field,Messge,MaxLength){
  var Current = document.getElementById(Field).value.length;
  var ColorClass = "green";
  var Limit;
  if (MaxLength && MaxLength>0){
    var Limit = MaxLength - Current;
    if (Limit < 0 ){ColorClass="red";}
      document.getElementById(Messge).innerHTML = "現在"+
        Current+"文字 <span class='"+ColorClass+
          "'>あと"+Limit+"文字</span>";
    } else {
      document.getElementById(Messge).innerHTML = "現在"+
        Current+"文字";
  }
}
</script>